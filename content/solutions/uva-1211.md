+++
title = "[DP][UVA1211] Atomic Car Race"
weight = 1
order = 1
date = 2020-02-04
#insert_anchor_links = "right"

[taxonomies]
tags = ["solutions"]
+++

[题目](http://vjudge.net/problem/UVA-1211)

读完题感觉和背包有点像（大雾），每一站换胎还是不换胎，应该就是DP了。

每两站之间的花费与前一次换胎的距离有关，
从换胎后第$x$公里走到第$x+1$公里的花费为
$$
h(x) = \begin{cases}
    \frac{1}{v - e \times (x - r)} &(x \geq r) \\\\
    \frac{1}{v - f \times (r - x)} &(x < r)
\end{cases}
$$
预处理得到换胎后走$x$公里的总花费$cost[x]$

定义到检查点$a_i$的最小花费$f(i)$为：

**从$a_1$到$a_{i-1}$中选择一个使得换完胎后跑到$a_i$花费最小的点$j$进行换胎**

$$
g(j, i) = \begin{cases}
    f(j) + cost[a[i] - a[j]] + b     & (j > 0) \\\\
    cost[a[i]]      & (j = 0)
\end{cases}     \\\\
f(i) = min_{\forall j \in [0, i)} g(j, i)
$$

其中$a_0$为起始点，到终点的最小花费就是$f(n)$

```python
import sys

def main():
    n = int(input().strip())
    a = list(map(int, input().strip().split(' ')))
    b = float(input().strip())
    r, v, e, f = map(float, input().strip().split(' '))

    def h(x):
        if x >= r:
            return 1.0/(v - e * (x - r))
        else:
            return 1.0/(v - f * (r - x))

    a.insert(0, 0)
    cost = [0] * (a[n] + 1)
    for i in range(1, a[n] + 1):
        cost[i] = h(i - 1) + cost[i - 1]
    f = [0] * (n + 1)

    for i in range(1, n + 1):
        t = sys.maxsize
        for j in range(i):
            t = min(t, f[j] + cost[a[i] - a[j]] + b)
        f[i] = min(t, cost[a[i]])

    print("{:.4f}".format(f[n]))


if __name__ == "__main__":
    while True:
        try:
            main()
        except EOFError:
            break

```